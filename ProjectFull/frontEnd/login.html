<!DOCTYPE html>
<html>
  <head>
    <!-- Google Icon Font -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Materialize CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Login</title>
    <style>
      #error-message {
        color: red;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        margin-top: 10px;
      }
    </style>
  </head>

  <body class="white">
    <div class="row">
      <div class="col s12 m8 l4 offset-m2 offset-l4">
        <div class="card white" style="border-radius: 10px;">
          <div class="card-content light-blue-text text-darken-4">
            <img class="responsive-img" src="assets/logo.png" alt="Logo">
            <span class="card-title center"><h5>Login</h5></span>

            <!-- Form di login -->
            <form id="loginForm" method="POST" action="../../backEnd/controllers/login.php">
              <!-- Selezione tipo di utente -->
              <div class="row center">
                <label>
                  <input class="with-gap" name="tipo" type="radio" value="utente" checked />
                  <span>Utente</span>
                </label>
                &nbsp;&nbsp;
                <label>
                  <input class="with-gap" name="tipo" type="radio" value="azienda" />
                  <span>Azienda</span>
                </label>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <input id="email" name="email" type="email" class="validate light-blue-text text-darken-4" required>
                  <label for="email" class="light-blue-text text-darken-4">Email</label>
                </div>
              </div>

              <div class="row">
                <div class="input-field col s12">
                  <input id="password" name="password" type="password" class="validate light-blue-text text-darken-4" required>
                  <label for="password" class="light-blue-text text-darken-4">Password</label>
                </div>
              </div>

              <div class="row center">
                <input type="submit" class="btn-large light-blue" value="Accedi">
              </div>
            </form>

            <div class="row center">
              <p style="color: black;">Non hai un account? <br/>Iscriviti ora come <a class="blue-link" href="./utente/registrazione.html">Candidato</a> o 
                <a class="blue-link" href="./azienda/registrazione.html">Azienda</a></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Qui comparirÃ  il messaggio di errore -->
    <div id="error-message"></div>

    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        M.updateTextFields();
      });

      function mostraMessaggioErrore() {
        const params = new URLSearchParams(window.location.search);
        if (params.get("error") === "true") {
          const messaggioErrore = "Login errato: credenziali errate o inesistenti.";
          document.getElementById("error-message").textContent = messaggioErrore;
        }
      }

      // Eseguo la funzione quando la pagina viene caricata
      window.onload = mostraMessaggioErrore;
    </script>
  </body>
</html>
