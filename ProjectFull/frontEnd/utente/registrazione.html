<!DOCTYPE html>
<html lang="it">
<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="./../css/materialize.css" media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <style>
        #message ul {
            list-style-type: none;
            padding-left: 0;
        }

        .valid {
            color: green !important;
        }

        .invalid {
            color: red !important;
        }
        body {
            background-color: white !important;
            color: #1565c0 !important;
        }

        .card,
        .container,
        .row,
        .input-field,
        .card-panel {
            background-color: white !important;
            color: #1565c0 !important;
        }

        label {
            color: #1565c0 !important;
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        textarea {
            background-color: white !important;
            color: #1565c0 !important;
            border-bottom: 1px solid #1565c0 !important;
        }

        .select-dropdown {
            background-color: white !important;
            color: #1565c0 !important;
        }

        .dropdown-content li > span {
            color: #1565c0 !important;
        }

        .select-wrapper input.select-dropdown {
            color: #1565c0 !important;
        }

        .btn {
            background-color: #1565c0 !important;
            color: white !important;
        }

        .btn:hover {
            background-color: #003c8f !important;
        }
    </style>
</head>

<body>

    <div class="row">
        <div class="col s12 m8 l4 offset-m2 offset-l4">
            <!-- CARD modificata: ora bianca -->
            <div class="card white" style="border-radius: 10px;">
                <div class="card-content" style="color: #1565c0;">
                    <span class="card-title center">
                        <h3 id="titoloModulo">Registrazione Utente</h3>
                    </span>

                    <form method="POST" action="../../backEnd/controllers/register.php" enctype="multipart/form-data">

                        <input type="hidden" name="tipo" value="utente" />

                        <div class="row" id="campi-utente">
                            <div class="input-field col s6">
                                <input id="nome" type="text" name="nome" class="validate" required>
                                <label for="nome">Nome</label>
                            </div>
                            <div class="input-field col s6">
                                <input id="cognome" type="text" name="cognome" class="validate" required>
                                <label for="cognome">Cognome</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s6">
                                <input id="username" type="text" name="username" class="validate" required>
                                <label for="username">Username</label>
                            </div>
                            <div class="input-field col s6">
                             <input id="nTelefono" type="tel" name="nTelefono" class="validate" required>
                                <label for="nTelefono">Telefono</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s12">
                                <input id="email" type="email" name="email" class="validate" required>
                                <label for="email">Email</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s12">
                                <input type="password" id="password" name="password"
                                       pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                                       title="Ci devono essere almeno 8 caratteri, di cui un numero, una lettera maiuscola ed una minuscola."
                                       required>
                                <label for="password">Password</label>
                                <div id="message">
                                    <p>La password deve contenere:</p>
                                    <ul>
                                        <li id="letter" class="invalid">Almeno una lettera minuscola</li>
                                        <li id="capital" class="invalid">Almeno una lettera maiuscola</li>
                                        <li id="number" class="invalid">Almeno un numero</li>
                                        <li id="length" class="invalid">Minimo 8 caratteri</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- CAMPO DESCRIZIONE con testo visibile -->
                        <div id="descrizione" class="row">
                            <div class="input-field col s12">
                                <textarea id="descrizione" name="descrizione" class="materialize-textarea"></textarea>
                                <label for="descrizione">Una tua Breve Descrizione</label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="file-field input-field">
                                <div class="btn light-blue darken-1">
                                    <span id="tastoImmagine">Immagine Profilo</span>
                                    <input type="file" id="immagineProfilo" name="immagineProfilo">
                                </div>
                                <div class="file-path-wrapper">
                                    <input class="file-path validate" type="text" placeholder="Carica la tua immagine">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="input-field col s12">
                                <select name="competenze1" id="competenze1" required>
                                    <option value="" disabled selected>Scegli una competenza</option>
                                    <option value="1">Java</option>
                                    <option value="2">Python</option>
                                    <option value="3">SQL</option>
                                    <option value="4">Project Management</option>
                                    <option value="5">React</option>
                                    <option value="6">Machine Learning</option>
                                    <option value="7">Linux</option>
                                    <option value="8">Comunicazione efficace</option>
                                    <option value="9">AWS</option>
                                    <option value="10">Cybersecurity</option>
                                </select>
                                <label for="competenze1">Competenza 1</label>
                            </div>

                            <div class="input-field col s12">
                                <select name="competenze2" id="competenze2" required>
                                    <option value="" disabled selected>Scegli una competenza</option>
                                    <option value="1">Java</option>
                                    <option value="2">Python</option>
                                    <option value="3">SQL</option>
                                    <option value="4">Project Management</option>
                                    <option value="5">React</option>
                                    <option value="6">Machine Learning</option>
                                    <option value="7">Linux</option>
                                    <option value="8">Comunicazione efficace</option>
                                    <option value="9">AWS</option>
                                    <option value="10">Cybersecurity</option>
                                </select>
                                <label for="competenze2">Competenza 2</label>
                            </div>

                            <div class="input-field col s12">
                                <select name="competenze3" id="competenze3" required>
                                    <option value="" disabled selected>Scegli una competenza</option>
                                    <option value="1">Java</option>
                                    <option value="2">Python</option>
                                    <option value="3">SQL</option>
                                    <option value="4">Project Management</option>
                                    <option value="5">React</option>
                                    <option value="6">Machine Learning</option>
                                    <option value="7">Linux</option>
                                    <option value="8">Comunicazione efficace</option>
                                    <option value="9">AWS</option>
                                    <option value="10">Cybersecurity</option>
                                </select>
                                <label for="competenze3">Competenza 3</label>
                            </div>
                        </div>

                        <div class="center-align">
                            <button class="btn waves-effect waves-light" type="submit" name="action">
                                Invia
                                <i class="material-icons right">send</i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Materialize JS + inizializzazione -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    <!--Materialize JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script>
        
      const password = document.getElementById('password');
      const message = document.getElementById('message');
      const letter = document.getElementById('letter');
      const capital = document.getElementById('capital');
      const number = document.getElementById('number');
      const length = document.getElementById('length');

      password.onfocus = function () {
        message.style.display = 'block';
      };

      password.onblur = function () {
        message.style.display = 'none';
      };

      password.onkeyup = function () {
        const val = password.value;

        if (/[a-z]/.test(val)) {
          letter.classList.remove('invalid');
          letter.classList.add('valid');
        } else {
          letter.classList.remove('valid');
          letter.classList.add('invalid');
        }

        if (/[A-Z]/.test(val)) {
          capital.classList.remove('invalid');
          capital.classList.add('valid');
        } else {
          capital.classList.remove('valid');
          capital.classList.add('invalid');
        }

        if (/\d/.test(val)) {
          number.classList.remove('invalid');
          number.classList.add('valid');
        } else {
          number.classList.remove('valid');
          number.classList.add('invalid');
        }

        if (val.length >= 8) {
          length.classList.remove('invalid');
          length.classList.add('valid');
        } else {
          length.classList.remove('valid');
          length.classList.add('invalid');
        }
      };
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var elems = document.querySelectorAll('select');
            M.FormSelect.init(elems);
        });

    </script>
    
</body>
</html>
